<p style="color: green"><%= notice %></p>
<% content_for :title, "Tasks" %>

<div class="d-flex justify-content-start align-items-center flex-column w-100 min-vh-90">
  <h1 class="text-black mb-5">Kanban</h1>
  <div class="d-flex flex-row align-items-start justify-content-between w-75 mt-5" style="height:70vh">

    <!-- Coluna To Do -->
    <div class="d-flex flex-column h-100 justify-content-start align-items-center border border-2 border-dark"
         style="flex: 0 0 28%; border-radius: 35px; background-color: #EEEEEEFF;">
      <div class="mt-4 d-flex flex-row border-2 border-dark w-100 justify-content-start align-items-center"
           style="border-top-left-radius: 13px; border-top-right-radius: 13px;">
        <div class="ms-4 me-2 rounded-circle" style="width:12px; height:12px; background-color: #7F5AF0;"></div>
        <h2>To Do</h2>
      </div>
      <div class="d-flex justify-content-center align-items-center" style="height:13%; width:100%;">
        <div class="d-flex justify-content-center align-items-center border border-2 h-75"
             style="border-radius:40px; width:85%; background-color: #7F5AF0;">
          <button type="button"
                  class="btn h-100 d-flex justify-content-center align-items-center"
                  style="border-radius:40px;  width:100%; background-color: #7F5AF0;"
                  data-bs-toggle="modal" data-bs-target="#newTaskModal">
            <label class="text-light">+ Add New Task</label>
          </button>
        </div>
      </div>
      <div class="d-flex align-items-end justify-content-end mt-2 w-100" style="height: 87%;">
        <div class="w-100 h-100 px-2"
             style="background-color: #EEEEEEFF; border-bottom-left-radius: 33px; border-bottom-right-radius: 33px;">
          <% @tasks.select { |t| t.status == "to do" }.each do |task| %>
            <div class="card rounded-5 mb-3 border border-2 border-gray">
              <div class="card-body d-flex flex-column">
                <h4 class="card-title"><%= task.tittle %></h4>
                <p class="card-text"><strong>Assignee:</strong> <%= task.assignee %></p>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Coluna Doing -->
    <div class="d-flex flex-column h-100 justify-content-start align-items-center border border-2 border-dark"
         style="flex: 0 0 28%; border-radius: 35px; background-color: #EEEEEEFF;">
      <div class="mt-4 d-flex flex-row border-2 border-dark w-100 justify-content-start align-items-center"
           style="border-top-left-radius: 13px; border-top-right-radius: 13px;">
        <div class="ms-4 me-2 rounded-circle" style="width:12px; height:12px; background-color: #FF8A1DFF;"></div>
        <h2>Doing</h2>
      </div>
      <div class="d-flex justify-content-center align-items-center" style="height:13%; width:100%;">
        <div class="d-flex justify-content-center align-items-center border border-2 h-75"
             style="border-radius:40px; width:85%; background-color: #FF8A1DFF;">
          <button type="button" class="btn btn-light" data-bs-toggle="modal" data-bs-target="#exampleModal">
            + Add New Task
          </button>
        </div>
      </div>
      <div class="d-flex align-items-end justify-content-end mt-2 w-100" style="height: 87%;">
        <div class="w-100 h-100 px-2"
             style="background-color: #EEEEEEFF; border-bottom-left-radius: 33px; border-bottom-right-radius: 33px;">
          <% @tasks.select { |t| t.status == "doing" }.each do |task| %>
            <div class="card rounded-5 mb-3 border border-2 border-gray">
              <div class="card-body d-flex flex-column">
                <h4 class="card-title"><%= task.tittle %></h4>
                <p class="card-text"><strong>Assignee:</strong> <%= task.assignee %></p>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Coluna Done -->
    <div class="d-flex flex-column h-100 justify-content-start align-items-center border border-2 border-dark"
         style="flex: 0 0 28%; border-radius: 35px; background-color: #EEEEEEFF;">
      <div class="mt-4 d-flex flex-row border-2 border-dark w-100 justify-content-start align-items-center"
           style="border-top-left-radius: 13px; border-top-right-radius: 13px;">
        <div class="ms-4 me-2 rounded-circle" style="width:12px; height:12px; background-color: #2CB61AFF;"></div>
        <h2>Done</h2>
      </div>
      <div class="d-flex justify-content-center align-items-center" style="height:13%; width:100%;">
        <div class="d-flex justify-content-center align-items-center border border-2 h-75"
             style="border-radius:40px; width:85%; background-color: #2CB61AFF;">
          <button type="button" class="btn btn-light" data-bs-toggle="modal" data-bs-target="#exampleModal">
            + Add New Task
          </button>
        </div>
      </div>
      <div class="d-flex align-items-end justify-content-end mt-2 w-100" style="height: 87%;">
        <div class="w-100 h-100 px-2"
             style="background-color: #EEEEEEFF; border-bottom-left-radius: 33px; border-bottom-right-radius: 33px;">
          <% @tasks.select { |t| t.status == "done" }.each do |task| %>
            <div class="card rounded-5 mb-3 border border-2 border-gray">
              <div class="card-body d-flex flex-column">
                <h4 class="card-title"><%= task.tittle %></h4>
                <p class="card-text"><strong>Assignee:</strong> <%= task.assignee %></p>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>

  </div>
</div>

<%= render 'modal_new_task'%>
